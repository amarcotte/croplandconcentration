<!DOCTYPE HTML>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Cropland Concentration in America: Data</title>

	<!--Styles-->
	<link href='http://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>
	<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:400,300,300italic,400italic,700,700italic' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="styles/main.css">

</head>

<body>

<div class="topnav">
	<a href="index.html" alt="Map">Map</a>
	<a href="about.html" alt="About">About</a>
    <a href="#" id="clicked" alt="Data">Data</a>
    <a href="poster.html" alt="Poster">Poster</a>
</div>

<nav>
	<a href="#source" alt="Source">Source</a>
    <a href="#collection" alt="Collection">Collection</a>
    <a href="#cleaning" alt="Cleaning">Cleaning</a>
    <a href="#transformation" alt="Transformation">Transformation</a>
    <a href="#integration" alt="Integration">Integration</a>
    <a href="#discoveries" alt="Discoveries">Discoveries</a>
</nav>

<div class="wrapper">

<h1>Data</h1>

    <a name="source"></a><h2>Source</h2>
    	<p>The data used for this visualization were comma-separated value (CSV) files generated by the <a href="http://www.nass.usda.gov/Quick_Stats/">National Agricultural Statistics Service (NASS)</a>, provided by the United States Department of Agriculture (USDA), and a Scaleable Vector Graphics (SVG) file of a <a href="http://commons.wikimedia.org/wiki/File:USA_Counties_with_FIPS_and_names.svg">map of the United States counties</a>. After cleaning and applying a few transformations, the CSV files where converted to JavaScript Object Notation (JSON) files using a <a href="http://www.convertcsv.com/csv-to-json.htm">CSV to JSON Converter</a>.</p>
    
    <a name="collection"></a><h2>Collection</h2>
    	<p>Several queries were made with the NASS QuickStats Interface, using each crop type—all cropland, corn, wheat, and soy—as a keyword. The following parameters were used to generate the tables:</p>
        
        <table>
        	<tr>
            	<th></th><th>For All Cropland</th><th>For Corn</th><th>For Wheat</th><th>For Soy</th>
            </tr>
            <tr>
            	<td class="rowlable">Program</td><td>Census</td><td>Survey</td><td>Survey</td><td>Survey</td>
            </tr>
            <tr>
            	<td class="rowlable">Sector</td><td>Economics</td><td>Crops</td><td>Crops</td><td>Crops</td>
            </tr>
            <tr>
            	<td class="rowlable">Group</td><td>Farms & land & assets</td><td>Field Crops</td><td>Field Crops</td><td>Field Crops</td>
            </tr>
            <tr>
            	<td class="rowlable">Commodity</td><td>Ag Land</td><td>Corn</td><td>Wheat</td><td>Soybeans</td>
            </tr>
            <tr>
            	<td class="rowlable">Category</td><td>Area</td><td>Area planted</td><td>Area planted</td><td>Area planted</td>
            </tr>
            <tr>
            	<td class="rowlable">Data Item</td><td>Ag land, cropland - acres</td><td>Corn - Acres planted</td><td>Wheat - Acres planted</td><td>Soybeans - Acres planted</td>
            </tr>
            <tr>
            	<td class="rowlable">Domain</td><td>Total</td><td>Total</td><td>Total</td><td>Total</td>
            </tr>
            <tr>
            	<td class="rowlable">Geographic Level</td><td>County</td><td>County</td><td>County</td><td>County</td>
            </tr>
            <tr>
            	<td class="rowlable">State</td><td>(All)</td><td>(All)</td><td>(All)</td><td>(All)</td>
            </tr>
            <tr>
            	<td class="rowlable">Period Type</td><td>Annual</td><td>Annual</td><td>Annual</td><td>Annual</td>
            </tr>
            <tr>
            	<td class="rowlable">Period</td><td>Year</td><td>Year</td><td>Year</td><td>Year</td>
            </tr>
        </table>
        
        <p>The resulting records were then downloaded as CSV files.</p>
    
    <a name="cleaning"></a><h2>Cleaning</h2>
    	<p>In order to prepare the CSV files to be converted into JSON, many columns needed to be pared down and the data reorganized using a pivot table. Columns relating to Program, Sector, Group, Commodity, Category, Data Item, Domain, Period Type, and Period were all removed because they would not help with the mapping. The only columns remaining were for <strong>State ANSI Code</strong>, <strong>County ANSI Code</strong>, <strong>State Name</strong>, <strong>County Name</strong>, <strong>Year</strong>, and <strong>Value</strong> (in acres). Each CSV file was renamed according to the commodity that the data within described (Corn_Area-Planted, Wheat_Area-Planted, etc).</p>
    
    <a name="transformation"></a><h2>Transformation</h2>
    	<p>First, to make the data easier to map, the values for each county needed to be separated by year. Second, the land area (in square miles) for each county needed to be added to each record, so that finding the concentration of cropland (acres per square mile) would be possible down the road. Finally, the State ANSI code and County ANSI code for each record needed to be combined to make a unique ID number for every county, referred to only as ANSI. Once these unique IDs were generated with the help of a few functions in Microsoft Excel, a pivot table was used to introduce a column for every year available in the data. The resulting clean tables are available for download here:</p>
        <ul class="linklist">
        	<li><a href="data/ALL-CROPLAND_Acres-by-County_1997-2007_CLEAN.csv" alt="all cropland csv">ALL-CROPLAND_Acres-by-County_1997-2007_CLEAN.csv</a></li>
            <li><a href="data/CROP-CORN_Acres-Planted-by-County_1930-2010_CLEAN.csv" alt="corn cropland csv">CROP-CORN_Acres-Planted-by-County_1930-2010_CLEAN.csv</a></li>
            <li><a href="data/CROP-WHEAT_Acres-Planted-by-County_1930-2000_CLEAN.csv" alt="wheat cropland csv">CROP-WHEAT_Acres-Planted-by-County_1930-2000_CLEAN.csv</a></li>
            <li><a href="data/CROP-SOY_Acres-Planted-by-County_1940-2010_CLEAN.csv" alt="soy cropland csv">CROP-SOY_Acres-Planted-by-County_1940-2010_CLEAN.csv</a></li>
        </ul>
        <p>These were the final files that were converted into JSON. Each county became it's own JavaScript object with a list of years and values below it. The resulting JSON is available for download here:</p>
        <ul class="linklist">
        	<li><a href="data/us_all_acres_county.json" alt="all cropland json">us_all_acres_county.json</a></li>
            <li><a href="data/us_corn_acresplanted_county.json" alt="corn cropland json">us_corn_acresplanted_county.json</a></li>
            <li><a href="data/us_wheat_acresplanted_county.json" alt="wheat cropland json">us_wheat_acresplanted_county.json</a></li>
            <li><a href="data/us_soy_acresplanted_county.json" alt="soy cropland json">us_soy_acresplanted_county.json</a></li>
        </ul>
    
    <a name="integration"></a><h2>Integration</h2>
    	<p>ANSI codes are mentioned above as the unique identifier for each county. ANSI codes are an identification system adopted by the American National Standards Institute, and a preferable to using county names as identification since many states share county names.</p>
        <p>Each path element in the SVG county map contains an ID property with a FIPS code—the ANSI codes used in the JSON is a later standard almost identical to FIPS. The essential utility behind this visualization is a script that was written to compare the ANSI codes in the JSON to the FIPS codes, and—if there was a match—setting new attributes to the SVG path element using the data in the matching JSON object as parameters.</p>
        <p>For example, if the path with the FIPS code "01001" is found to match a JSON object with the ANSI code "01001", and the year selected is "1940", the script will pull the value from the "y1940" data row in the JSON, divide that value by the value of  "sqmiles" in the same object (to get the concentration), and assign a new color to the path on the map based on how large that resulting value is. Let's say for this case, "y1940" contains the value 18,042 (acres of cropland), and "sqmiles" contains the value 443 (square miles)—the script would divide 18,042 by 443 to get 40.73. For values between 1 and 50, the code will assign the color #d2f5ce (the lightest green).</p>
    
    <a name="discoveries"></a><h2>Discoveries</h2>
    	<p>Being able to map the cropland concentrations revealed several interesting facts and discrepancies that were important for understanding the overall dataset.</p>
        
        <h3>Inconsistent reporting among counties</h3>
        	<p>Since the data for each crop are split across multiple years, it was possible to tell that whole states did not report county-level data for a particular year, because the "no value" color and regular choropleth color would be sharply divided along state lines. However, for later years, there would clearly be variegated choropleth coloring for the same region (To observe this, return to the map and look at "Corn" in 1930). A hypothesis can be made to explain this: It's possible that whole states chose not to report county-level for certain years because concentrations were too low for that particular crop. As a crop became more prevalent, the state may have decided that it was time to keep more detailed records.</p>
        
        <h3>Impossible values from incorrect reporting</h3>
        	<p>All data values were taken from the USDA database—the land area and "all cropland" data were both from the Census program. In the case of the "All Cropland" map, some counties show cropland concentrations greater than 640 acres / square mile. This is impossible, since there are only 640 acres in a square mile. A county's cropland concentration may approach 640 acres / per square mile, but would never be fully concentrated on account of the land area needed for towns, bodies of water, and other property. A possible explanation for this discrepancy is that the Census program over-generalized the amounts of cropland (rounded up), perhaps not accounting for bodies of water within fields, whereas the land area data for each county does.</p>
        
        <h3>Different climates and geographies for different crops</h3>
        	<p>By splitting the crops onto different maps, it was possible to see that the production for each crop was concentrated in a different part of the United States. In some cases, high concentrations of certain crops followed the lines of known geographic features. For instance, soybeans grow in high concentrations around the Mississippi River. Even without any written characteristics about the crops, one can infer from the most concentrated regions what kind of climate / soil works best for a crop.</p>
        
        <h3>Range of a certain crop</h3>
        	<p>Most surprising of all, the map reveals that the highest concentrations of crops are limited to just a few states. This begs the question: For years where there appeared to be less acres of a given crop planted, was that due to environmental factors? For example, did that state suffer drought or flood that year? What was the impact for the rest of the nation? For this visualization, to keep the scope under control, only a limited number of years were mapped, but a map for every single year might provide more insight into this question—for instance, if it was known that an environmental disaster happened on certain year, one might be able to observe that effect on the map.</p>


</div>

<!--Attribution for background Photo-->
<div class="photobyline">
	<p class="first">"<a href="http://www.flickr.com/photos/wy_jackrabbit/4710511515/" alt="photo title">Farmland Abstract, Somewhere in Kansas</a>" by <a href="http://www.flickr.com/photos/wy_jackrabbit/" alt="author">Wyoming_Jackrabbit</a> is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/2.0/deed.en" alt="CC License">CC BY 2.0</a></p>
</div>

</body>
</html>
